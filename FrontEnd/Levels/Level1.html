<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>Babylon.js sample code</title>

    <!-- Babylon.js -->
    <script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script>
    <script src="https://preview.babylonjs.com/ammo.js"></script>
    <script src="https://preview.babylonjs.com/cannon.js"></script>
    <script src="https://preview.babylonjs.com/Oimo.js"></script>
    <script src="https://preview.babylonjs.com/libktx.js"></script>
    <script src="https://preview.babylonjs.com/earcut.min.js"></script>
    <script src="https://preview.babylonjs.com/babylon.js"></script>
    <script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script>
    <script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script>
    <script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script>
    <script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script>
    <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script>
    <script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script>
    <script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/meshwriter@1.2.3/dist/meshwriter.min.js"></script>
    <style>
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>

<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        var canvas = document.getElementById("renderCanvas");

        var engine = null;
        var scene = null;
        var createDefaultEngine = function () { return new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true }); };
        var createScene = function () {

            var scene = new BABYLON.Scene(engine);
            var hl, cylinder1, cylinder2, cylinder3, cylinder4;

            var camera = new BABYLON.ArcRotateCamera("Camera", 0, 0, 0, new BABYLON.Vector3(0, 0, 0), scene);
            camera.setPosition(new BABYLON.Vector3(0, 0, -4));
            // camera.attachControl(canvas, true);
            // var camera = new BABYLON.ArcRotateCamera("cam", -Math.PI / 2, Math.PI / 2, 20, BABYLON.Vector3.Zero());

            var light = new BABYLON.HemisphericLight("sun", new BABYLON.Vector3(0, 1, 0), scene);
            var anchor = new BABYLON.TransformNode("");
            var manager = new BABYLON.GUI.GUI3DManager(scene);
            var skybox = BABYLON.MeshBuilder.CreateBox("skyBox", { size: 1000.0 }, scene);
            var skyboxMaterial = new BABYLON.StandardMaterial("skyBox", scene);
            skyboxMaterial.backFaceCulling = false;
            skyboxMaterial.reflectionTexture = new BABYLON.CubeTexture("https://img.freepik.com/free-photo/triangle-stage-with-smoke-purple-neon-light-abstract-futuristic-background_33739-194.jpg?size=626&ext=jpg", scene);
            skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
            skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);
            skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);
            skybox.material = skyboxMaterial;

            var panel = new BABYLON.GUI.PlanePanel();
            // panel.margin = 0.75;
            // hdrTexture = BABYLON.CubeTexture.CreateFromPrefilteredData("textures/environment.dds", scene);
            // scene.environmentTexture = hdrTexture;
            // scene.createDefaultSkybox(hdrTexture, true, 200, 0.7);
            manager.addControl(panel);
            panel.linkToTransformNode(anchor);
            panel.scaling.x = 0.05;
            panel.scaling.y = 0.05;
            panel.scaling.z = 0.05;
            panel.position.x = 0.27;
            panel.position.y = -0.25;
            panel.position.z = -2.5;
            var ttb = function () {
                BABYLON.SceneLoader.ImportMesh("", "https://david.blob.core.windows.net/babylonjs/MRTK/", "pushButton.glb", scene, function (newMeshes) {
                    pushButtonCore = newMeshes[0];
                    makePushButtons();
                    pushButtonCore.setEnabled(false);
                });

            }
            var scale = 0.1, MeshWriter, text1;
            Writer = BABYLON.MeshWriter(scene, { scale: scale });
            text1 = new Writer(
                "LEVEL1 - SKILL MATCHING ",
                {
                    "anchor": "center",
                    "letter-height": 2.5,
                    "color": "black",
                    "position": {
                        "z": 10,
                    }
                }
            );
            var tmesh = text1.getMesh();
            tmesh.position.y = 1.6;
            tmesh.rotation = new BABYLON.Vector3(-Math.PI / 2, Math.PI / 2, -Math.PI / 2);
            var hl = new BABYLON.HighlightLayer("hl1", scene);
            hl.addMesh(tmesh, BABYLON.Color3.Purple());

            // var count = 0;

            // function makePushButton(mesh, hoverColor) {

            //     var cylinder = mesh.getChildMeshes(false, (node) => { return node.name.indexOf("Cylinder") !== -1 })[0];
            //     var cylinderMat = cylinder.material.clone();
            //     cylinderMat.albedoColor = new BABYLON.Color3(0.5, 0.19, 0);
            //     cylinder.material = cylinderMat;
            //     var pushButton = new BABYLON.GUI.MeshButton3D(mesh, "pushButton" + index);
            //     pushButton.pointerEnterAnimation = () => {
            //         if (count % 2 != 0) {

            //             cylinder.material.albedoColor = new BABYLON.Color3(0.25, 0, 0);
            //         } else {

            //             cylinder.material.albedoColor = new BABYLON.Color3(0, 0.25, 0);
            //         }
            //     };
            //     pushButton.pointerOutAnimation = () => {
            //         cylinder.material.albedoColor = new BABYLON.Color3(0.5, 0.19, 0);
            //         if (count % 2 != 0) {

            //             cylinder.material.albedoColor = new BABYLON.Color3(0, 0.25, 0);
            //         } else {

            //             cylinder.material.albedoColor = new BABYLON.Color3(0.25, 0, 0);
            //         }
            //     };

            //     pushButton.pointerDownAnimation = () => {
            //         count++;
            //         if (count % 2 != 0) {
            //             alert("employee added");
            //         } else {
            //             alert("employee removed");
            //         }
            //         cylinder.position.y = 0;
            //     }
            //     pushButton.pointerUpAnimation = () => {
            //         cylinder.position.y = 0.21;
            //     }
            //     pushButton.onPointerDownObservable.add(() => {
            //         console.log(pushButton.name + " pushed.");
            //     });
            //     panel.addControl(pushButton);
            //     index++;
            // }
            // function makePushButtons() {
            //     var color;
            //     var newPushButton;
            //     // var colors = [{ r: 0.25, g: 0, b: 0 }, { r: 0, g: 0.25, b: 0 }, { r: 0, g: 0, b: 0.25 },
            //     // { r: 0.25, g: 0.25, b: 0 }, { r: 0, g: 0.25, b: 0.25 }, { r: 0.25, g: 0, b: 0.25 }];

            //     panel.blockLayout = true;
            //     for (var i = 0; i < 1; i++) {
            //         newPushButton = pushButtonCore.clone("pushButton" + index);
            //         color = new BABYLON.Color3(0.25, 0, 0);
            //         makePushButton(newPushButton, color);
            //     }
            //     panel.blockLayout = false;
            // }

            var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI();
            advancedTexture.rootContainer.scaleX = window.devicePixelRatio;
            advancedTexture.rootContainer.scaleY = window.devicePixelRatio;
            var button3 = BABYLON.GUI.Button.CreateSimpleButton("but1", 'HELP');
            advancedTexture.addControl(button3);
            button3.top = "-290px";
            button3.left = "-445px";
            button3.width = '67px';
            button3.height = '20px';
            button3.cornerRadius = 5;
            button3.color = "rgb(128,0,128)";
            button3.fontSize = 20;
            button3.fontFamily = "Georgia";
            button3.thickness = 0;
            button3.textBlock.outlineWidth = 8;
            // button3.paddingLeft="-945px";
            // button3.paddingTop="-570px";

            var oc = "rgb(169,169,169)";
            button3.textBlock.outlineColor = oc;
            advancedTexture.addControl(button3);
            fred = setInterval(function () {
                button3.textBlock.outlineColor = (button3.textBlock.outlineColor == oc ? "black" : oc);
            }, 2000);

            scene.onDispose = function () { clearInterval(fred) };

            var scale = 0.6;

            button3.onPointerUpObservable.add(function () {
                window.location.href = "/level";
            });


            var advancedTexture2 = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI();
            advancedTexture2.rootContainer.scaleX = window.devicePixelRatio;
            advancedTexture2.rootContainer.scaleY = window.devicePixelRatio;
            var button1 = BABYLON.GUI.Button.CreateSimpleButton("but1", 'RESET');
            advancedTexture2.addControl(button1);
            button1.top = "-500px";
            button1.left = "-355px";
            button1.width = '66px';
            button1.height = '20px';
            button1.cornerRadius = 5;
            button1.color = "rgb(128,0,128)";
            button1.fontSize = 20;
            button1.fontFamily = "Georgia";
            button1.thickness = 0;
            button1.textBlock.outlineWidth = 8;
            // button3.paddingLeft="-945px";
            // button3.paddingTop="-570px";

            var oc = "rgb(169,169,169)";
            button1.textBlock.outlineColor = oc;
            advancedTexture2.addControl(button1);
            fred = setInterval(function () {
                button1.textBlock.outlineColor = (button1.textBlock.outlineColor == oc ? "black" : oc);
            }, 2000);

            scene.onDispose = function () { clearInterval(fred) };

            var scale = 0.6;

            button1.onPointerUpObservable.add(function () {
                window.location.href = "/level";
            });







            var advancedTexture1 = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI();
            advancedTexture1.rootContainer.scaleX = window.devicePixelRatio;
            advancedTexture1.rootContainer.scaleY = window.devicePixelRatio;
            var button = BABYLON.GUI.Button.CreateSimpleButton("but1", 'LEVELS');
            advancedTexture1.addControl(button3);
            button.top = "-290px";
            button.left = "399px";
            button.width = '78px';
            button.height = '20px';
            button.cornerRadius = 5;
            button.color = "rgb(128,0,128)";
            button.fontSize = 20;
            button.fontFamily = "Georgia";

            button.textBlock.outlineWidth = 8;
            // button.paddingRight="-865px";
            // button.paddingTop="-570px";
            button.thickness = 0;


            var oc = "rgb(169,169,169)";
            button.textBlock.outlineColor = oc;
            advancedTexture1.addControl(button);
            fred = setInterval(function () {
                button.textBlock.outlineColor = (button.textBlock.outlineColor == oc ? "black" : oc);
            }, 2000);

            scene.onDispose = function () { clearInterval(fred) };

            var scale = 0.6;







            ///// for client text

            // var scale   = 0.1, MeshWriter, client1;
            // Writer = BABYLON.MeshWriter(scene, {scale:scale});
            // client1  = new Writer( 
            // " 1.CLIENT ",
            // {
            //     "anchor": "center",
            //     "letter-height": 1.5,
            //     "color": "black",
            //     "position": {
            //         "z": 10,
            //     }
            //  }
            // );
            // var tmesh = client1.getMesh();
            // tmesh.position.y=1;
            // tmesh.position.x=3.3;
            // tmesh.rotation = new BABYLON.Vector3(-1.5, 1.85, -1.57);

            // var hl = new BABYLON.HighlightLayer("hl1", scene);
            // hl.addMesh(tmesh, BABYLON.Color3.Purple());



            var plane6 = BABYLON.Mesh.CreatePlane("plane6", 40);
            var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(plane6);

            var textstring = " 1.CLIENT "
            var text1 = new BABYLON.GUI.TextBlock();
            text1.text = textstring;
            text1.fontStyle = " Bold";
            text1.color = "grey";
            text1.fontSize = 14;
            var text2 = new BABYLON.GUI.TextBlock();
            text2.text = textstring;
            text2.fontStyle = " Bold";
            text2.color = "purple";
            text2.fontSize = 14;
            advancedTexture.addControl(text2);
            advancedTexture.addControl(text1);
            plane6.position.y = 3;
            plane6.position.z = 10;
            plane6.position.x = 10.4;





            //// for manager text

            var plane6 = BABYLON.Mesh.CreatePlane("plane6", 40);
            var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(plane6);

            var textstring = " 2.MANAGER "
            var text1 = new BABYLON.GUI.TextBlock();
            text1.text = textstring;
            text1.fontStyle = " Bold";
            text1.color = "grey";
            text1.fontSize = 14;
            var text2 = new BABYLON.GUI.TextBlock();
            text2.text = textstring;
            text2.fontStyle = " Bold";
            text2.color = "purple";
            text2.fontSize = 14;
            advancedTexture.addControl(text2);
            advancedTexture.addControl(text1);
            plane6.position.y = -5.5;
            plane6.position.z = 10;
            plane6.position.x = 10.1;

            // var count = 0;

            ////// for employee text 
            var plane6 = BABYLON.Mesh.CreatePlane("plane6", 40);
            var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(plane6);

            var textstring = " 4.Work "
            var text1 = new BABYLON.GUI.TextBlock();
            text1.text = textstring;
            text1.fontStyle = " Bold";
            text1.color = "grey";
            text1.fontSize = 14;
            var text2 = new BABYLON.GUI.TextBlock();
            text2.text = textstring;
            text2.fontStyle = " Bold";
            text2.color = "blue";
            text2.fontSize = 14;
            advancedTexture.addControl(text2);
            advancedTexture.addControl(text1);
            plane6.position.y = 3;
            plane6.position.z = 10;
            plane6.position.x = -10.3;



            //// for work text
            var plane6 = BABYLON.Mesh.CreatePlane("plane6", 40);
            var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(plane6);

            var textstring = " 3.Employees "
            var text1 = new BABYLON.GUI.TextBlock();
            text1.text = textstring;
            text1.fontStyle = " Bold";
            text1.color = "grey";
            text1.fontSize = 14;
            var text2 = new BABYLON.GUI.TextBlock();
            text2.text = textstring;
            text2.fontStyle = " Bold";
            text2.color = "blue";
            text2.fontSize = 14;
            advancedTexture.addControl(text2);
            advancedTexture.addControl(text1);
            plane6.position.y = -5.5;
            plane6.position.z = 10;
            plane6.position.x = -10.5;


            //////////////////////////////////////////////////////////////////
            var urlList = [
                "http://doc.babylonjs.com/",
                "http://www.google.com/",
                "https://github.com/BabylonJS/Babylon.js/",
            ];

            // var textures = [
            //     // "https://upload.wikimedia.org/wikipedia/commons/e/ef/Icono_Normativa.png",
            //     "https://i.imgur.com/Pox1X97.png"
            //     // "https://upload.wikimedia.org/wikipedia/commons/1/10/IC_engine.JPG",
            //     // "https://upload.wikimedia.org/wikipedia/commons/e/ef/Icono_Normativa.png"

            // ];

            var textures = [
                "https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcScosMwZ9y8ZlviQ-QCRg_VE0pOYu_LddT9h164XbpLuRz0K6rx",
                "data:image/jpeg;base64,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"
                , "https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQAiIWrGtGYl3UqfSvNs4g7QypxjTHIs-LxrkQgh0tDxFrCwas4", "data:image/jpeg;base64,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"

            ];
            var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");

            var line1 = new BABYLON.GUI.Line();
            line1.x1 = 2550;
            line1.y1 = 270;
            line1.x2 = 2550;
            line1.y2 = 1000;
            line1.lineWidth = 50;
            line1.dash = [25, 10];
            line1.color = "white";
            line1.isVisible = false;
            advancedTexture.addControl(line1);
            var line2 = new BABYLON.GUI.Line();
            line2.x1 = 300;
            line2.y1 = 1150;
            line2.x2 = 1550;
            line2.y2 = 1150;
            line2.lineWidth = 50;
            line2.dash = [25, 10];
            line2.color = "white";
            line2.isVisible = false;
            advancedTexture.addControl(line2);
            // var line3 = new BABYLON.GUI.Line();
            // line3.x1 = 2550;
            // line3.y1 = 270;
            // line3.x2 = 2550;
            // line3.y2 = 1000;
            // line3.lineWidth = 50;
            // line3.dash = [25, 10];
            // line3.color = "white";
            // line3.isVisible = false;
            // advancedTexture.addControl(line3);

            // this is function that is called on each cylinder pick
            var flag1 = 0, flag2 = 0, flag3 = 0, flag4 = 0;
            var flagatt1 = 0, flagatt2 = 0, flagatt3 = 0, flagatt4 = 0;
            var posa1 = 0, posa2 = 0, posa3 = 0;
            var Cylinder = [];
            var employeelist = [];
            var bemplist = [];
            var Employee;
            // var Employee = [
            //     { name: "Emp1", skill: ["skill1", "skill5",] },//0
            //     { name: "Emp2", skill: ["skill2", "skill9"] },//1
            //     { name: "Emp3", skill: ["skill3", "skill5", "skill10"] },//2
            //     { name: "Emp4", skill: ["skill4"] },//3
            //     { name: "Emp5", skill: ["skill5", "skill5"] },//4
            //     { name: "Emp6", skill: ["skill6", "skill5", "skill10"] },//5
            //     { name: "Emp7", skill: ["skill7",] },//6
            //     { name: "Emp8", skill: ["skill8", "skill5", "skill10", "skill10"] },//7
            //     { name: "Emp9", skill: ["skill9"] },//8
            //     { name: "Emp10", skill: ["skill10", "skill5"] }//9
            // ]

            var rmattr = function () {
                for (var index = 0; index < 16; index++) {
                    // console.log("Cylinder.name" + Cylinder[index].name);
                    scene.removeMesh(Cylinder[index]);
                }
            }
            var rect1, panelcopy;
            var attrf = function (meshEvent) {
                // console.log("meshevent" + meshEvent.name);
                // console.log("pickedMesh" + pickedMesh);

                if (flagatt1 == 0) {
                    var pickedMesh = meshEvent.meshUnderPointer;
                    // console.log("pickedMesh" + pickedMesh.name);
                    posa1 = pickedMesh.position.x;
                    posa2 = pickedMesh.position.y;
                    posa3 = pickedMesh.position.z;
                    pickedMesh.position.x = 0;
                    pickedMesh.position.y = 0;
                    //    ttb();
                    // console.log(employeelist);
                    pickedMesh.position.z = -2.5;
                    flagatt1 = 1;
                } else {
                    var pickedMesh = meshEvent.meshUnderPointer;
                    if (employeelist.indexOf(bemplist[parseInt(pickedMesh.name) - 500]) == -1) {
                        // console.log("while pushing" + Employee[parseInt(pickedMesh.name) - 4])
                        employeelist.push(bemplist[parseInt(pickedMesh.name) - 500]);
                        alert("employee added");

                    } else {
                        var result = confirm("Employee already added want to remove?")
                        if (result == true) {
                            employeelist.pop(Employee[parseInt(pickedMesh.name) - 500]);
                        }

                        // alert("employee already added");
                    }
                    // panel.dispose();
                    // manager.removeControl(panel);
                    panel.scaling.x = 0.05;
                    panel.scaling.y = 0.05;
                    panel.scaling.z = 0.05;
                    panel.position.x = 0.27;
                    panel.position.y = -0.25;
                    panel.position.z = -2.5;
                    pickedMesh.position.x = posa1;
                    pickedMesh.position.y = posa2;
                    pickedMesh.position.z = 0;
                    // console.log("else");
                    // console.log("pickedMesh" + pickedMesh.name);
                    flagatt1 = 0;
                    // console.log(employeelist);
                }

            }
            var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");

            var line1 = new BABYLON.GUI.Line();
            line1.x1 = 2550;
            line1.y1 = 260;
            line1.x2 = 2550;
            line1.y2 = 1050;
            line1.lineWidth = 50;
            line1.dash = [25, 10];
            line1.color = "yellow";
            line1.isVisible = false;
            advancedTexture.addControl(line1);
            var line2 = new BABYLON.GUI.Line();
            line2.x1 = 350;
            line2.y1 = 1150;
            line2.x2 = 2370;
            line2.y2 = 1150;
            line2.lineWidth = 50;
            line2.dash = [25, 10];
            line2.color = "yellow";
            line2.isVisible = false;
            advancedTexture.addControl(line2);
            var line3 = new BABYLON.GUI.Line();
            line3.x1 = 180;
            line3.y1 = 260;
            line3.x2 = 180;
            line3.y2 = 1050;
            line3.lineWidth = 50;
            line3.dash = [25, 10];
            line3.color = "yellow";
            line3.isVisible = false;
            advancedTexture.addControl(line3);


            var pickedMesh;
            var str;
            var advancedTextureattr, Employee;
            var show = function (name) {
                var angle = 0;
                var groupwidget = name;
                groupwidget.visibility = 1;
                const Http = new XMLHttpRequest();
                var id1 = 500
                const url = 'http://127.0.0.1:1000/level/getEmployee';
                Http.open("GET", url);
                Http.send();
                Http.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        Employee = JSON.parse(Http.responseText);
                        // text3.text = response;
                        // console.log(Employee);
                    }
                }


                for (var index = 0; index < 16; index++) {
                    Cylinder[index] = BABYLON.Mesh.CreateCylinder(500 + index, 0.01, .2, .37, 20, 1, scene);
                    Cylinder[index].position.y = Math.sin(angle);
                    Cylinder[index].position.x = Math.cos(angle);
                    Cylinder[index].rotation.x = Math.PI / 2;
                    // Cylinder.parent = groupwidget;
                    Cylinder[index].material = new BABYLON.StandardMaterial("mat_" + index, scene);
                    // Cylinder[index].material.diffuseTexture = new BABYLON.Texture("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBw0NDQ0NDQ0NDw0NDQ0NDQ0NDQ8NDQ0NFREWFhURFRUYHSggGBolGxUVITEhJSkrLi4uFx8zODMsNygtLisBCgoKDQ0NFg0PFSsZFRkrLSsrKysrKysrKys3Kys3NystKysrKysrKy0tKystLSsrKysrKysrKysrKysrKysrK//AABEIAKwBJgMBIgACEQEDEQH/xAAXAAEBAQEAAAAAAAAAAAAAAAAAAQIH/8QAIRABAQABAwMFAAAAAAAAAAAAAAERIWGBAkHwIjFRccH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A7iAAACZ25+FAAAAEkBQAAAAAAAAAAAAAAAGeq2XpxLZbi3T0zF1/OWgAAAAAAAAAAAAAAAAAAAAAAAAAAAAATO3KgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACXZQAAAAAgAAAAAAAAAAAAAAAAAACefagAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACWAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAATCgAAAAJKoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJc9tPbtnTKgAAAAAAAAAAAAAAAYAAAAAAAAASqAAAAAP/9k=");
                    Cylinder[index].actionManager = new BABYLON.ActionManager(scene);

                    Cylinder[index].actionManager.registerAction(
                        new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, attrf)
                    );


                    Cylinder[index].actionManager.registerAction(

                        new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger, tooltip(Cylinder[index]))
                    );
                    angle -= Math.PI / (16 / 2);
                }
                var alpha = Math.PI;
                scene.beforeRender = function () {
                    groupwidget.rotation.z += Math.cos(alpha) / 100;
                    alpha += .1;
                }
            }
            hl = new BABYLON.HighlightLayer("hl1", scene);
            var msg;




            var pos1, pos2;
            var id;
            var al;
            var bt;
            var p1, p2;
            var pickCylinder = function (meshEvent) {
                pickedMesh = meshEvent.meshUnderPointer;
                // console.log("flag2: " + flag2);
                pos1 = pickedMesh.position.y;
                pos2 = pickedMesh.position.x;
                if (pickedMesh.name == 0) {
                    if (flag1 == 0) {
                        // hl.removeMesh(pickedMesh);
                        // hl.addMesh(cylinder2, BABYLON.Color3.Green());
                        flag1 = 1;

                    } else {
                        flag1 = 0;
                        hl.removeMesh(pickedMesh);
                        hl.addMesh(cylinder2, BABYLON.Color3.Green());
                        line1.isVisible = true;
                    }
                } else if (pickedMesh.name == 1) {
                    if (flag2 == 0) {
                        flag2 = 1;
                    } else {
                        flag2 = 0;
                        line2.isVisible = true;
                        hl.removeMesh(pickedMesh);
                        hl.addMesh(cylinder4, BABYLON.Color3.Green());


                    }
                } else if (pickedMesh.name == 2) {
                    if (flag3 == 0) {

                        flag3 = 1;

                        /////////////////////////
                        const Http = new XMLHttpRequest();
                        const url = 'http://127.0.0.1:1000/level/allocation';
                        Http.open("POST", url, true);
                        var params = JSON.stringify({ 'emp_list': employeelist });
                        Http.setRequestHeader("Content-type", "application/json; charset=utf-8");
                        Http.onreadystatechange = function () {
                            if (this.readyState == 4 && this.status == 200) {
                                var response = Http.responseText;
                                // console.log(response);
                                if (response == "allocated") {
                                    // console.log("work completed");
                                    alert("work completed");
                                } else {
                                    // text1.text = "Work incompleted.
                                    alert("work incompleted");
                                }

                                // console.log(response);
                            }
                        }
                        Http.send(params);

                        hl.removeMesh(pickedMesh);
                        flag3 = 1;
                        ///////////
                    } else {
                        id = setInterval(frameback, 5);
                        hl.removeMesh(pickedMesh);



                        rmattr();

                    }
                } else if (pickedMesh.name == 3) {//employee but use 
                    if (flag4 == 0) {
                        al = -0.5;
                        bt = -1.5;
                        id = setInterval(framefor, 5);
                        show(pickedMesh);


                        flag4 = 1;
                    } else {
                        line3.isVisible = true;
                        id = setInterval(frameback, 5);
                        hl.removeMesh(pickedMesh);
                        hl.addMesh(cylinder3, BABYLON.Color3.Green());
                        rmattr();
                        p1 = -4.5;
                        p2 = -2;
                        al = -0.5;
                        bt = -1.5;
                        flag4 = 0;
                    }


                }
            }
            /////////////framefor
            function framefor() {
                // console.log("position.x =" + pos2 + " position.y = " + pos1);
                if (pos1 == 0 && pos2 == 0) {
                    pickedMesh.position.x = pos2;
                    pickedMesh.position.y = pos1;
                    clearInterval(id);
                } else {
                    // pos++;
                    pickedMesh.position.x = pos2;
                    pickedMesh.position.y = pos1;

                    if (pos1 != 0) {
                        pos1 = pos1 - al;
                    } if (pos2 != 0) {
                        pos2 = pos2 - bt;
                    }


                }

            }
            // console.log(pickedMesh.name);

            ///////////////////////////////////////////////


            /////////////////////////frameback//////////////////////
            function frameback() {
                // console.log("position.x =" + pos2 + " position.y = " + pos1);
                if (pos1 == p2 && pos2 == p1) {
                    pickedMesh.position.x = p1;
                    pickedMesh.position.y = p2;
                    clearInterval(id);
                } else {
                    // pos++;
                    pickedMesh.position.x = pos2;
                    pickedMesh.position.y = pos1;

                    if (pos1 != p2) {
                        pos1 = pos1 + al;
                    } if (pos2 != p1) {
                        pos2 = pos2 + bt;
                    }
                    // console.log("position.x =" + pos2 + " position.y = " + pos2);

                }

            }

            // console.log(pickedMesh.name);
            // window.open(urlList[Number(pickedMesh.name)]);

            ////////////////popup/////////////////////////////
            // var text1 = new BABYLON.GUI.TextBlock();
            var tooltip = function (x) {
                // console.log(x);
                var text1 = new BABYLON.GUI.TextBlock();
                var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");
                advancedTexture.useInvalidateRectOptimization = false;
                let rect1 = new BABYLON.GUI.Rectangle();
                // rect1.shadowColor("white");
                // var hl = new BABYLON.HighlightLayer("hl1", scene);
                // hl.addMesh(rect1, BABYLON.Color3.Green());

                advancedTexture.addControl(rect1);
                rect1.width = "380px";
                rect1.height = "200px";
                rect1.thickness = 4;
                // rect1.shadowColor = new BABYLON.Color3(22, 100, 8);
                // console.log(x.name);
                var Message = ["Client", "Manager", "Work", "Employee"];
                var xx;

                if (x.name == 0) {
                    rect1.linkOffsetX = "-750px";
                    rect1.linkOffsetY = "310px";
                    const Http = new XMLHttpRequest();
                    const url = 'http://127.0.0.1:1000/level/level1-4/getClient';
                    Http.open("GET", url);
                    Http.send();
                    Http.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            var response = JSON.parse(Http.responseText);
                            text1.text = "CLIENT" + "\nProject type:" + response.Project_Type + "\ncost:" + response.cost + "\ndeadline:" + response.deadline + "\npatientLevel:" + response.patient_level;
                        }
                    }
                }
                else if (x.name == 1) {
                    rect1.linkOffsetX = "-750px";
                    rect1.linkOffsetY = "-310px";
                    const Http = new XMLHttpRequest();
                    const url = 'http://127.0.0.1:1000/level/getProjectSkills';
                    Http.open("GET", url);
                    Http.send();
                    Http.onreadystatechange = function () {
                        if (this.readyState == 4 && this.status == 200) {
                            var response = JSON.parse(Http.responseText);
                            text1.text = "Manager\n " + "project Type: " + response[0].name + "     " + "\nSkills: " + response[0].skills + "\nproject Type: " + response[1].name + "     " + "Skills: " + response[1].skills + "\nproject Type: " + response[2].name + "     " + "Skills: " + response[2].skills;
                            // console.log(response[0].name);
                            // console.log("\n")
                            // console.log(response[0].skills);
                        }
                    }


                    xx = Message[parseInt(x.name)];
                    text1.text = xx;
                    // console.log(Message[parseInt(x.name)]);
                }
                else if (x.name == 2) {//work
                    rect1.linkOffsetX = "750px";
                    rect1.linkOffsetY = "310px";

                    xx = Message[parseInt(x.name)];
                    text1.text = xx;
                    // console.log(Message[parseInt(x.name)]);
                }
                else if (x.name == 3) {//employee
                    rect1.linkOffsetX = "750px";
                    rect1.linkOffsetY = "-310px";
                    xx = Message[parseInt(x.name)];
                    // console.log("message" + msg);
                    // if (msg == "Allocated") {
                    //     console.log("work completed");
                    //     text1.text = "Work completed"
                    // } else {
                    //     text1.text = "Work incompleted"
                    // }
                    text1.text = xx;
                    // console.log(Message[parseInt(x.name)]);
                    rect1.width = "0px";
                    rect1.height = "0px";

                }
                else {
                    rect1.linkOffsetX = "0px";
                    rect1.linkOffsetY = "0px";
                    rect1.width = "470px";
                    rect1.height = "80px"
                    let response;
                    var c = function (x) {
                        var Employee;
                        const Http = new XMLHttpRequest();
                        const url1 = 'http://127.0.0.1:1000/level/getEmployee';
                        Http.open("GET", url1);
                        Http.send();
                        Http.onreadystatechange = function () {
                            if (this.readyState == 4 && this.status == 200) {
                                Employee = JSON.parse(Http.responseText);
                                bemplist = Employee;
                                // console.log(Employee);
                                text1.text = Employee[x - 500].name + "\n" + Employee[x - 500].skills;
                            }
                        }

                    }

                    if (x.name == 500) {
                        c(500);
                    }
                    else if (x.name == 501) {
                        c(501);
                    } else if (x.name == 502) {

                        c(502);
                    } else if (x.name == 503) {
                        c(503);
                    } else if (x.name == 504) {
                        c(504);
                    } else if (x.name == 505) {
                        c(505);
                    } else if (x.name == 506) {
                        c(506);
                    } else if (x.name == 507) {
                        c(507);
                    } else if (x.name == 508) {
                        c(508);
                    } else if (x.name == 509) {
                        c(509);
                    } else if (x.name == 510) {
                        c(510);
                    } else if (x.name == 511) {
                        c(511);
                    } else if (x.name == 512) {
                        c(512);
                    } else if (x.name == 513) {
                        c(513);
                    } else if (x.name == 514) {
                        c(514);
                    } else if (x.name == 515) {
                        c(515);
                    } else if (x.name == 516) {
                        c(516);
                    }
                }

                rect1.transformCenterX = 0;
                rect1.transformCenterY = 1;
                rect1.background = "#da14ff";
                rect1.alpha = 0.6;
                rect1.scaleX = 0;
                rect1.scaleY = 0;
                rect1.cornerRadius = 30;

                rect1.color = " #1439ff";
                rect1.linkWithMesh(x);



                // text1.text = Message[parseInt(x.name)];
                // text1.text = xx;
                text1.color = "white";
                text1.fontSize = 20;
                text1.textWrapping = true;
                text1.textVerticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;
                // text1.background = 'Blue'
                rect1.addControl(text1)
                text1.alpha = (1 / text1.parent.alpha);
                text1.paddingTop = "10px";
                text1.paddingBottom = "10px";
                text1.paddingLeft = "10px";
                text1.paddingRight = "10px";






                let scaleXAnimation = new BABYLON.Animation("myAnimation", "scaleX", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);
                let scaleYAnimation = new BABYLON.Animation("myAnimation", "scaleY", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT);

                var keys = [];

                keys.push({
                    frame: 0,
                    value: 0
                });
                keys.push({
                    frame: 10,
                    value: 1
                });

                scaleXAnimation.setKeys(keys);
                scaleYAnimation.setKeys(keys);
                rect1.animations = [];
                rect1.animations.push(scaleXAnimation);
                rect1.animations.push(scaleYAnimation);


                x.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger, function (ev) {
                    scene.beginAnimation(rect1, 0, 10, false);
                }));
                //if hover is over remove highlight of the mesh
                x.actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOutTrigger, function (ev) {
                    scene.beginAnimation(rect1, 10, 0, false);
                }));
            }
            //////////////////////////////////////////////////////////////////


            // cylinder generator with actionManagers on each
            var angle = 0;
            var angle1 = -2;
            //cylinder 1/////////////

            cylinder1 = BABYLON.MeshBuilder.CreateCylinder(0, { radius: 0.1, height: 0.1 }, scene);
            // cylinder.position.y = Math.sin(angle);
            // cylinder.position.x = Math.cos(angle);
            // cylinder.rotation.x = Math.PI / 2;

            hl.addMesh(cylinder1, BABYLON.Color3.Green());
            cylinder1.position.x = 4.5;
            cylinder1.position.y = 2;
            cylinder1.position.z = 2;
            cylinder1.rotation.x = 1.56;
            cylinder1.addRotation(0, Math.PI, 0);
            cylinder1.material = new BABYLON.StandardMaterial("mat_" + 0, scene);
            cylinder1.material.diffuseTexture = new BABYLON.Texture(textures[0]);
            // add actionManager on each cyl
            cylinder1.actionManager = new BABYLON.ActionManager(scene);
            // register 'pickCylinder' as the handler function for cylinder picking action.
            cylinder1.actionManager.registerAction(
                new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickCylinder)
            );
            cylinder1.actionManager.registerAction(
                new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger, tooltip(cylinder1))
            );
            // angle += 2 * Math.PI / 3;
            //////////////////cylinder 2////////////////////////
            cylinder2 = BABYLON.MeshBuilder.CreateCylinder(1, { radius: 0.1, height: 0.1 }, scene);
            cylinder2.position.x = 4.5;
            cylinder2.position.y = -2;
            cylinder2.position.z = 2;
            cylinder2.rotation.x = 1.56;
            cylinder2.addRotation(0, Math.PI, 0);
            cylinder2.material = new BABYLON.StandardMaterial("mat_" + 0, scene);
            cylinder2.material.diffuseTexture = new BABYLON.Texture(textures[1]);
            cylinder2.actionManager = new BABYLON.ActionManager(scene);
            cylinder2.actionManager.registerAction(
                new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickCylinder)
            );
            cylinder2.actionManager.registerAction(
                new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger, tooltip(cylinder2))
            );
            //////////////////cylinder 3////////////////////////
            cylinder3 = BABYLON.MeshBuilder.CreateCylinder(2, { radius: 0.1, height: 0.1 }, scene);
            cylinder3.position.x = -4.5;
            cylinder3.position.y = 2;
            cylinder3.position.z = 2;
            cylinder3.rotation.x = 1.56;
            cylinder3.addRotation(0, Math.PI, 0);
            cylinder3.material = new BABYLON.StandardMaterial("mat_" + 0, scene);
            cylinder3.material.diffuseTexture = new BABYLON.Texture(textures[2]);
            cylinder3.actionManager = new BABYLON.ActionManager(scene);
            cylinder3.actionManager.registerAction(
                new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickCylinder)
            );
            cylinder3.actionManager.registerAction(
                new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger, tooltip(cylinder3))
            );
            ////////////////cylinder 4////////////////////////
            cylinder4 = BABYLON.MeshBuilder.CreateCylinder(3, { radius: 0.1, height: 0.1 }, scene);
            // console.log(cylinder4);
            cylinder4.position.x = -4.5;
            cylinder4.position.y = -2;
            cylinder4.position.z = 2;
            cylinder4.rotation.x = 1.56;
            cylinder4.addRotation(0, Math.PI, 0);
            cylinder4.material = new BABYLON.StandardMaterial("mat_" + 0, scene);
            cylinder4.material.diffuseTexture = new BABYLON.Texture(textures[3]);
            cylinder4.actionManager = new BABYLON.ActionManager(scene);
            cylinder4.actionManager.registerAction(
                new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickCylinder)
            );
            cylinder4.actionManager.registerAction(
                new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger, tooltip(cylinder4))
            );
            var empinfo = function (text, cc) {
                // var plane2 = BABYLON.Mesh.CreatePlane("plane2", 0.5);
                // plane2.position.y = 0;
                // plane2.position.x = 0;
                // plane2.position.z = -2.6;
                // plane2.visibility = 1;
                advancedTextureattr = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(cc);
                // cc.rotation.y = 180;
                // var text1 = new BABYLON.GUI.TextBlock();
                // var tt = call();
                // console.log(tt);
                text1.text = text.name;
                text1.color = "black";
                text1.fontSize = 50;
                // advancedTextureattr.addControl(text1);


            }

            //////////////////////////////////////////
            // var cylinder1;
            // for (let i = 0; i < 4; i++) {
            //     cylinder1[i] = BABYLON.Mesh.CreateCylinder(2, { radius: 0.1, height: 0.1 }, scene);
            //     cylinder1[i].position.x = 4.5;
            //     cylinder1[i].position.y = -2;
            //     cylinder1[i].position.z = 2;
            //     cylinder1[i].rotation.x = 1.56;
            //     cylinder1[i].addRotation(0, Math.PI, 0);
            //     cylinder1[i].material = new BABYLON.StandardMaterial("mat_" + i, scene);
            //     cylinder1[i].material.diffuseTexture = new BABYLON.Texture(textures[i]);
            //     cylinder1[i].actionManager = new BABYLON.ActionManager(scene);
            //     cylinder1[i].actionManager.registerAction(
            //         new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickCylinder)
            //     );

            // }

            ///////////////////center////////////////////////////////////
            // var cylinder5 = BABYLON.MeshBuilder.CreateCylinder(5, { radius: 0.1, height: 0.1 }, scene);
            // // cylinder.position.y = Math.sin(angle);
            // // cylinder.position.x = Math.cos(angle);
            // // cylinder.rotation.x = Math.PI / 2;
            // cylinder5.position.z = 2;
            // cylinder5.position.y = 0;
            // cylinder5.position.x = 0;
            // cylinder5.rotation.x = 1.56;
            // cylinder5.addRotation(0, Math.PI, 0);
            // cylinder5.material = new BABYLON.StandardMaterial("mat_" + 0, scene);
            // cylinder5.material.diffuseTexture = new BABYLON.Texture(textures[0]);
            // // add actionManager on each cyl
            // cylinder5.actionManager = new BABYLON.ActionManager(scene);
            // // register 'pickCylinder' as the handler function for cylinder picking action.
            // cylinder5.actionManager.registerAction(
            //     new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPickTrigger, pickCylinder)
            // );

            scene.registerBeforeRender(function () {
                // cylinder1.rotation.y += 0.1;

                // cylinder2.rotation.y += 0.1;
                // cylinder3.rotation.y += 0.1;
                // cylinder4.rotation.y += 0.1;
            })
            // scene.debugLayer.show();
            return scene;

        }

        engine = createDefaultEngine();
        if (!engine) throw 'engine should not be null.';
        scene = createScene();

        engine.runRenderLoop(function () {
            if (scene) {
                scene.render();
            }
        });

        // Resize
        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>
</body>

</html>
